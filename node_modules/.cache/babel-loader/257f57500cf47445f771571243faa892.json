{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\badsc\\\\Documents\\\\GitHub\\\\trading-dashboard-local\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Component,useState,useContext,useLayoutEffect,useEffect}from'react';import{Box,Button,ButtonGroup}from\"@chakra-ui/react\";//import { DashboardNavbar } from './components/navbar/DashboardNavbar';\nimport TableCache from'./cache/TableCache.js';//import StockPicker from './components/stockpicker/StockPicker';\nimport{DashboardContext}from'./context/DashboardContext.js';import Container from'./back-test-data-handler/container/Container';var DashboardOne=function DashboardOne(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),lock=_useState2[0],setLock=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),dashboardTwo=_useState4[0],setDashboardTwo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),initialiseTableTwo=_useState6[0],setInitialiseTableTwo=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tempDashboard=_useState8[0],setTempDashboard=_useState8[1];var intervalID;var init=function init(){var intervalListCount=localStorage.getItem('intervalListCount');if(intervalListCount===null)localStorage.setItem('intervalListCount',0);};useEffect(function(){// Needs fixing, does not detect when a user has disconnected\ninit();var connectionEstablished=localStorage.getItem('_connectionEstablished');intervalID=setInterval(function(){if(connectionEstablished&&TableCache.getFill()){initialiseDashboard();initialiseLock(false);var sessionEndedCalled=localStorage.getItem('sessionEndedCalled');if(sessionEndedCalled===null||sessionEndedCalled===undefined){localStorage.setItem('sessionEndedCalled',false);}var sessionEnded=localStorage.getItem('sessionEnded');if(sessionEnded&&!sessionEndedCalled){window.alert('Session is currently out of trading hours');localStorage.removeItem('sessionEndedCalled');localStorage.setItem('sessionEndedCalled',true);}clearInterval(intervalID);}},500);},[]);var initialiseDashboard=function initialiseDashboard(){var dashboard=[];/* dashboard.push(<DashboardNavbar\r\n             lock={lock}\r\n             dashboardTwo={dashboardTwo}\r\n             initialiseTableTwo={initialiseTableTwo}\r\n             temp={tempDashboard}\r\n             style={{ transform: 'translateX(20px)' }}\r\n         />);\r\n         */setTempDashboard(dashboard);};useEffect(function(){setLock(true);setDashboardTwo(tempDashboard);},[lock]);var initialiseLock=function initialiseLock(state){setInitialiseTableTwo(state);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(DashboardContext.Consumer,null,function(children){return/*#__PURE__*/React.createElement(Container,{children:children});}));};export default DashboardOne;","map":{"version":3,"names":["React","Component","useState","useContext","useLayoutEffect","useEffect","Box","Button","ButtonGroup","TableCache","DashboardContext","Container","DashboardOne","_ref","children","_useState","_useState2","_slicedToArray","lock","setLock","_useState3","_useState4","dashboardTwo","setDashboardTwo","_useState5","_useState6","initialiseTableTwo","setInitialiseTableTwo","_useState7","_useState8","tempDashboard","setTempDashboard","intervalID","init","intervalListCount","localStorage","getItem","setItem","connectionEstablished","setInterval","getFill","initialiseDashboard","initialiseLock","sessionEndedCalled","undefined","sessionEnded","window","alert","removeItem","clearInterval","dashboard","state","createElement","Fragment","Consumer"],"sources":["C:/Users/badsc/Documents/GitHub/trading-dashboard-local/src/main/DashboardOne.js"],"sourcesContent":["import React, { Component, useState, useContext, useLayoutEffect, useEffect } from 'react';\r\nimport { Box, Button, ButtonGroup } from \"@chakra-ui/react\";\r\n//import { DashboardNavbar } from './components/navbar/DashboardNavbar';\r\n\r\nimport TableCache from './cache/TableCache.js';\r\n//import StockPicker from './components/stockpicker/StockPicker';\r\n\r\nimport { DashboardContext } from './context/DashboardContext.js'\r\nimport Container from './back-test-data-handler/container/Container';\r\n\r\nconst DashboardOne = ({ children }) => {\r\n    const [lock, setLock] = useState(true);\r\n    const [dashboardTwo, setDashboardTwo] = useState([]);\r\n    const [initialiseTableTwo, setInitialiseTableTwo] = useState(false);\r\n    const [tempDashboard, setTempDashboard] = useState([]);\r\n\r\n    let intervalID;\r\n\r\n    const init = () => {\r\n\r\n        const intervalListCount = localStorage.getItem('intervalListCount');\r\n        \r\n        if(intervalListCount === null)\r\n            localStorage.setItem('intervalListCount', 0);\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        // Needs fixing, does not detect when a user has disconnected\r\n\r\n        init();\r\n\r\n        const connectionEstablished = localStorage.getItem('_connectionEstablished');\r\n        intervalID = setInterval(() => {\r\n            if (connectionEstablished && TableCache.getFill()) {\r\n                initialiseDashboard();\r\n                initialiseLock(false);\r\n\r\n                const sessionEndedCalled = localStorage.getItem('sessionEndedCalled');\r\n                if (sessionEndedCalled === null || sessionEndedCalled === undefined) {\r\n                    localStorage.setItem('sessionEndedCalled', false);\r\n                }\r\n\r\n                const sessionEnded = localStorage.getItem('sessionEnded');\r\n                if (sessionEnded && !sessionEndedCalled) {\r\n                    window.alert('Session is currently out of trading hours');\r\n                    localStorage.removeItem('sessionEndedCalled');\r\n                    localStorage.setItem('sessionEndedCalled', true);\r\n                }\r\n\r\n                clearInterval(intervalID);\r\n            }\r\n        }, 500);\r\n    }, [])\r\n\r\n    const initialiseDashboard = () => {\r\n        const dashboard = [];\r\n\r\n        /* dashboard.push(<DashboardNavbar\r\n             lock={lock}\r\n             dashboardTwo={dashboardTwo}\r\n             initialiseTableTwo={initialiseTableTwo}\r\n             temp={tempDashboard}\r\n             style={{ transform: 'translateX(20px)' }}\r\n         />);\r\n         */\r\n\r\n        setTempDashboard(dashboard);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setLock(true);\r\n        setDashboardTwo(tempDashboard);\r\n    }, [lock])\r\n\r\n    const initialiseLock = (state) => {\r\n        setInitialiseTableTwo(state);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <DashboardContext.Consumer>\r\n                {children => (\r\n                     <Container children={children} />\r\n                )}\r\n            </DashboardContext.Consumer>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default DashboardOne;"],"mappings":"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"},"metadata":{},"sourceType":"module"}