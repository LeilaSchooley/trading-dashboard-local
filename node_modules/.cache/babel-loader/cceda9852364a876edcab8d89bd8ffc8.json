{"ast":null,"code":"import routes from './routes/routes.json';\nimport \"regenerator-runtime\";\nimport axios from 'axios';\nimport https from 'https';\nimport * as fs from 'fs';\nimport log4js from '../../src/main/logger/logger';\nconst apiKey = process.env.API_KEY;\nconst logger = log4js.getLogger();\nlogger.level = \"debug\";\n// \"testEnvironment\": \"node\" (fixes ssl error)\n// try https get (then switch to websockets)\n\nexport const requestPairByDay_ = async symbol => {\n  //console.log('called');\n\n  /* const httpsAgent = https.Agent({\r\n       ca: fs.readFileSync(\"./certificate.crt\"),\r\n       key: fs.readFileSync(\"./certificate.key\"),\r\n       passphrase: \"1234\",\r\n   })*/\n\n  //  const instance = axios.create({ httpsAgent: httpsAgent });\n  // routes.api.v3['historical-chart'].daily\n  const localhost = \"https://localhost:44362\"; // move to xml or yml file\n  // logger.info(`${localhost}` + \"/test/\".concat(forexPair));\n  // .api/v3/historical-chart/historical-price-full/{symbol}\n  try {\n    const response = await axios.get(`${localhost}` + routes.api.v3['historical-chart'].daily.concat(symbol));\n    logger.log(`URI`, routes.api.v3['historical-chart'].daily.concat(symbol));\n    const data = response.data !== undefined && response.data !== null ? response.data : response;\n    logger.info(`Reponse data`, data);\n    logger.info(`Status`, response);\n    return data;\n  } catch (errors) {\n    console.error(errors);\n  }\n};\nexport const requestPairByMinute = async (minute, forexPair) => {\n  await fetch(routes.api.v3['historical-chart'].minute.concat(minute + 'min/' + forexPair + \"?apikey=\" + apiKey)).then(response => {\n    return response.json();\n  }).catch(error => {\n    console.log(\"error \" + error);\n    return {\n      status: 400\n    };\n  });\n};\n\n/*export const requestPairByHour = async (hour, forexPair) => {\r\n    await fetch(routes.api.v3['historical-chart'].hour.concat(hour + 'hour/' + forexPair + \"?apikey=\" + apiKey))\r\n        .then(response => {\r\n\r\n            const fileName = forexPair + \"-\"\r\n\r\n            file = new File(response.json(), \"\", {\r\n                type: \"\tapplication/json\",\r\n            });\r\n        })\r\n        .finally(response => {\r\n            return response.json()\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error \" + error);\r\n            return { status: 400 };\r\n        }\r\n        );\r\n}*/\n\nexport const requestPairByDay = async forexPair => {\n  const localhost = \"http://localhost:44362\";\n  await fetch(localhost + routes.api.v3['historical-chart'].daily.concat(forexPair)).then(response => {\n    console.log(\"ok \" + response);\n    return response.json();\n  }).catch(error => {\n    console.log(\"error \" + error);\n    return {\n      status: 400\n    };\n  });\n};\n\n// fix link\nexport const requestPairByDailyRange = async (forexPair, startRange, endRange) => {\n  let file = [];\n  const localhost = \"https://localhost:44362\";\n  await fetch(localhost + routes.api.v3['historical-chart'].daily.concat(forexPair + '/' + startRange + '/' + endRange)).then(response => {\n\n    /*   const fileName = forexPair + \"-\" + range;\r\n            file = new File(response.json(), fileName, {\r\n           type: \"application/json\",\r\n       });*/\n  }).finally(response => {\n    return {\n      file: response.json(),\n      status: 200\n    };\n  }).catch(error => {\n    console.log(\"error \" + error);\n    return {\n      file: null,\n      status: 400\n    };\n  });\n};","map":{"version":3,"names":["routes","axios","https","fs","log4js","apiKey","process","env","API_KEY","logger","getLogger","level","requestPairByDay_","symbol","localhost","response","get","api","v3","daily","concat","log","data","undefined","info","errors","console","error","requestPairByMinute","minute","forexPair","fetch","then","json","catch","status","requestPairByDay","requestPairByDailyRange","startRange","endRange","file","finally"],"sources":["C:/Users/badsc/Documents/GitHub/trading-dashboard-local/src/api/financialApi.js"],"sourcesContent":["import routes from './routes/routes.json';\r\nimport \"regenerator-runtime\";\r\nimport axios from 'axios';\r\nimport https from 'https';\r\nimport * as fs from 'fs';\r\nimport log4js from '../../src/main/logger/logger';\r\nconst apiKey = process.env.API_KEY;\r\n\r\nconst logger = log4js.getLogger();\r\nlogger.level = \"debug\";\r\n// \"testEnvironment\": \"node\" (fixes ssl error)\r\n// try https get (then switch to websockets)\r\n\r\nexport const requestPairByDay_ = async (symbol) => {\r\n    //console.log('called');\r\n\r\n    /* const httpsAgent = https.Agent({\r\n         ca: fs.readFileSync(\"./certificate.crt\"),\r\n         key: fs.readFileSync(\"./certificate.key\"),\r\n         passphrase: \"1234\",\r\n     })*/\r\n\r\n    //  const instance = axios.create({ httpsAgent: httpsAgent });\r\n    // routes.api.v3['historical-chart'].daily\r\n    const localhost = \"https://localhost:44362\" // move to xml or yml file\r\n    // logger.info(`${localhost}` + \"/test/\".concat(forexPair));\r\n    // .api/v3/historical-chart/historical-price-full/{symbol}\r\n    try {\r\n        const response = await axios.get(`${localhost}` +\r\n            routes.api.v3['historical-chart'].daily.concat(symbol));\r\n\r\n        logger.log(`URI`, routes.api.v3['historical-chart'].daily.concat(symbol));\r\n\r\n        const data = (response.data !== undefined && response.data !== null) ? response.data : response;\r\n\r\n        logger.info(`Reponse data`, data);\r\n        logger.info(`Status`, response);\r\n        \r\n        return data;\r\n    } catch (errors) {\r\n        console.error(errors);\r\n    }\r\n}\r\n\r\nexport const requestPairByMinute = async (minute, forexPair) => {\r\n    await fetch(routes.api.v3['historical-chart'].minute.concat(minute + 'min/' + forexPair + \"?apikey=\" + apiKey))\r\n        .then(response => {\r\n            return response.json()\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error \" + error);\r\n            return { status: 400 };\r\n        }\r\n        );\r\n}\r\n\r\n/*export const requestPairByHour = async (hour, forexPair) => {\r\n    await fetch(routes.api.v3['historical-chart'].hour.concat(hour + 'hour/' + forexPair + \"?apikey=\" + apiKey))\r\n        .then(response => {\r\n\r\n            const fileName = forexPair + \"-\"\r\n\r\n            file = new File(response.json(), \"\", {\r\n                type: \"\tapplication/json\",\r\n            });\r\n        })\r\n        .finally(response => {\r\n            return response.json()\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error \" + error);\r\n            return { status: 400 };\r\n        }\r\n        );\r\n}*/\r\n\r\nexport const requestPairByDay = async (forexPair) => {\r\n    const localhost = \"http://localhost:44362\"\r\n    await fetch(localhost + routes.api.v3['historical-chart'].daily.concat(forexPair))\r\n        .then(response => {\r\n            console.log(\"ok \" + response);\r\n            return response.json()\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error \" + error);\r\n            return { status: 400 };\r\n        }\r\n        );\r\n}\r\n\r\n// fix link\r\nexport const requestPairByDailyRange = async (forexPair, startRange, endRange) => {\r\n    let file = [];\r\n    const localhost = \"https://localhost:44362\"\r\n    await fetch(localhost + routes.api.v3['historical-chart'].daily\r\n        .concat(forexPair + '/' + startRange + '/' + endRange))\r\n        .then(response => {\r\n\r\n            /*   const fileName = forexPair + \"-\" + range;\r\n   \r\n               file = new File(response.json(), fileName, {\r\n                   type: \"application/json\",\r\n               });*/\r\n        })\r\n        .finally(response => {\r\n            return {\r\n                file: response.json(),\r\n                status: 200\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.log(\"error \" + error);\r\n            return {\r\n                file: null,\r\n                status: 400\r\n            };\r\n        }\r\n        );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}